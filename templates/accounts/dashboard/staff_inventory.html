{% extends "accounts/dashboard/base_dashboard.html" %}

{% block sidebar %}
    <a href="{% url 'staff_analytics' %}" class="{% if request.resolver_match.url_name == 'staff_analytics' %}active{% endif %}"><i class="fa-solid fa-chart-pie me-2"></i> Analytics</a>
    <a href="{% url 'staff_inventory' %}" class="{% if request.resolver_match.url_name == 'staff_inventory' %}active{% endif %}"><i class="fa-solid fa-boxes-stacked me-2"></i> Inventory</a>
    <a href="{% url 'staff_top_selling' %}" class="{% if request.resolver_match.url_name == 'staff_top_selling' %}active{% endif %}"><i class="fa-solid fa-fire me-2"></i> Top Selling</a>
    <a href="{% url 'staff_dashboard' %}" class="{% if request.resolver_match.url_name == 'staff_dashboard' and not request.GET.status %}active{% endif %}"><i class="fa-solid fa-receipt me-2"></i> All Orders</a>
    <hr style="background-color: rgba(255,255,255,0.1)">
    <a href="{% url 'staff_blog_list' %}" class="{% if request.resolver_match.url_name == 'staff_blog_list' %}active{% endif %}"><i class="fa-solid fa-newspaper me-2"></i> Blogs</a>
{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h3 class="fw-bold mb-0" style="font-size: 1.4rem;">Inventory Pulse</h3>
    <span class="badge bg-danger rounded-pill px-3 py-2">{{ low_stock_items.count }} Critical Items</span>
</div>

<div class="row g-3">
    {% for food in low_stock_items %}
    <div class="col-md-4 col-lg-3">
        <div class="card border-0 shadow-sm rounded-4 h-100 p-3">
            <div class="d-flex justify-content-between align-items-start mb-2">
                <div class="bg-danger bg-opacity-10 text-danger rounded-3 p-2">
                    <i class="fa-solid fa-triangle-exclamation"></i>
                </div>
                <span class="badge bg-light text-dark border rounded-pill small">{{ food.category.name }}</span>
            </div>
            <h6 class="fw-bold mb-1 text-truncate">{{ food.name }}</h6>
            <div class="d-flex justify-content-between align-items-center mt-3">
                <div class="text-muted small">Stock: <span class="text-danger fw-bold">{{ food.stock }}</span></div>
                <a href="/admin/menu/food/{{ food.id }}/change/" class="btn btn-sm btn-dark rounded-pill px-3" style="font-size: 10px;">Restock</a>
            </div>
        </div>
    </div>
    {% empty %}
    <div class="col-12 text-center py-5">
        <div class="bg-success bg-opacity-10 text-success rounded-circle d-inline-block p-4 mb-3">
            <i class="fa-solid fa-check-circle fa-3x"></i>
        </div>
        <h5 class="fw-bold">All Good!</h5>
        <p class="text-muted small">Everything is sufficiently stocked.</p>
    </div>
    {% endfor %}
</div>

<style>
    .rounded-4 { border-radius: 1rem !important; }
    .card { transition: all 0.3s; }
    .card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.1) !important; }
</style>
{% endblock %}